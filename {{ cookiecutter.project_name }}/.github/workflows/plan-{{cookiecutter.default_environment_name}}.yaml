---
name: Terragrunt Plan Pipeline - Environment {{cookiecutter.default_environment_name}}
permissions:
    contents: read
    security-events: write
    id-token: write
    actions: write

on:
    pull_request:
        branches:
          - {{cookiecutter.apply_branch: null}: null}
        types: [opened, synchronize, reopened]

jobs:
    include:
        uses: ./.github/workflows/plan-workflow.yaml
        with:
            default_region: {{cookiecutter.default_region: null}: null}
            environment: {{cookiecutter.default_environment_name: null}: null}
        secrets:
            account_id: ${{ secrets.AWS_ACCOUNT_ID_{{cookiecutter.default_environment_name}} }}
